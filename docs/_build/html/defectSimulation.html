

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>defectSimulation package &mdash; Sett2  documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="defectSimulation.simulations package" href="defectSimulation.simulations.html" />
    <link rel="prev" title="GIT" href="modules.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> Sett2
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">GIT</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">defectSimulation package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-defectSimulation.sett2">defectSimulation.sett2 module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-defectSimulation">Module contents</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="defectSimulation.simulations.html">defectSimulation.simulations package</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Sett2</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="modules.html">GIT</a> &raquo;</li>
        
      <li>defectSimulation package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/defectSimulation.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="defectsimulation-package">
<h1>defectSimulation package<a class="headerlink" href="#defectsimulation-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-defectSimulation.sett2">
<span id="defectsimulation-sett2-module"></span><h2>defectSimulation.sett2 module<a class="headerlink" href="#module-defectSimulation.sett2" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="defectSimulation.sett2.correctImages">
<code class="sig-prename descclassname">defectSimulation.sett2.</code><code class="sig-name descname">correctImages</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">imgExt</span></em>, <em class="sig-param"><span class="n">selectBox</span></em>, <em class="sig-param"><span class="n">autoBox</span></em>, <em class="sig-param"><span class="n">crop</span></em>, <em class="sig-param"><span class="n">stds</span></em><span class="sig-paren">)</span><a class="headerlink" href="#defectSimulation.sett2.correctImages" title="Permalink to this definition">¶</a></dt>
<dd><p>Enchance data images with various types of noise (including smart noise) and standardisation to prepare them for running model</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>imgExt</strong> (<em>str</em>) – extension of images to be corrected</p></li>
<li><p><strong>selectBox</strong> (<em>bool</em>) – selects a box to base correction on</p></li>
<li><p><strong>autoBox</strong> (<em>bool</em>) – uses crop to automatically box part of image</p></li>
<li><p><strong>crop</strong> (<em>list</em>) – [[x1, x2], [y1, y2]] selects x and y crop limits for autoBox</p></li>
<li><p><strong>stds</strong> (<em>float</em>) – decides dynamic range of the image</p></li>
</ul>
</dd>
</dl>
<dl class="simple">
<dt>Writes:</dt><dd><p><a href="#id1"><span class="problematic" id="id2">*</span></a>.&lt;ext&gt;: corrected data image files written to &lt;base&gt;/data/collated/annotations/corrected where base is the directory containing sett2</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>First run this function to generate the directory structure to place images into</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="defectSimulation.sett2.enchanceImages">
<code class="sig-prename descclassname">defectSimulation.sett2.</code><code class="sig-name descname">enchanceImages</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">runName</span></em>, <em class="sig-param"><span class="n">imgMean</span></em>, <em class="sig-param"><span class="n">imgStd</span></em>, <em class="sig-param"><span class="n">gaussian</span></em>, <em class="sig-param"><span class="n">doSmartNoise</span></em>, <em class="sig-param"><span class="n">smartNoise</span></em>, <em class="sig-param"><span class="n">numCircles</span></em>, <em class="sig-param"><span class="n">addGrid</span></em>, <em class="sig-param"><span class="n">gridRange</span></em>, <em class="sig-param"><span class="n">stds</span></em><span class="sig-paren">)</span><a class="headerlink" href="#defectSimulation.sett2.enchanceImages" title="Permalink to this definition">¶</a></dt>
<dd><p>Enchance simulation images with various types of noise (including smart noise), bright circles, grids and standardisation to be used for training</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>runName</strong> (<em>str</em>) – decides the simulation run that will have its images enchanced</p></li>
<li><p><strong>imgMean</strong> (<em>list</em>) – choose the mean intensity an image can have; a list of two floats [x, y] with x lesser than or equal to y and both lesser than 1</p></li>
<li><p><strong>imgStd</strong> (<em>list</em>) – choose the range of intensity ranges an image can have; a list of two floats [x, y] with x lesser than or equal to y and both strictly greater than 0</p></li>
<li><p><strong>gaussian</strong> (<em>list</em>) – range of gaussian in units of sigma; a list of two floats [x, y] with x lesser than y</p></li>
<li><p><strong>doSmartNoise</strong> (<em>bool</em>) – choose whether or not to add smart noise to simulated images</p></li>
<li><p><strong>smartNoise</strong> (<em>list</em>) – range of intensity of smart noise; a list of two floats [x, y] with x lesser than or equal to y</p></li>
<li><p><strong>numCircles</strong> (<em>int</em>) – choose how many bright circles to add to the simulated images; 0 to not add any</p></li>
<li><p><strong>addGrid</strong> (<em>bool</em>) – splits the image into four random quadrants with random intensities</p></li>
<li><p><strong>gridRange</strong> (<em>float</em>) – range over which quadrants can be brightened or dimmed</p></li>
<li><p><strong>stds</strong> (<em>int</em>) – choose the intensity range an image can have</p></li>
</ul>
</dd>
</dl>
<dl class="simple">
<dt>Writes:</dt><dd><p><em>_defect</em>.jpg: enchanced simulation image files written to ../sett2/&lt;runName&gt;/enchanced</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To run this with smartNoise, first extractSmartNoise() needs to be run and noise files must be generated</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="defectSimulation.sett2.extractSmartNoise">
<code class="sig-prename descclassname">defectSimulation.sett2.</code><code class="sig-name descname">extractSmartNoise</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">crop</span></em>, <em class="sig-param"><span class="n">cropManual</span></em>, <em class="sig-param"><span class="n">cropX</span></em>, <em class="sig-param"><span class="n">cropY</span></em><span class="sig-paren">)</span><a class="headerlink" href="#defectSimulation.sett2.extractSmartNoise" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract noise .jpg files from experimental images as .bmp files</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>crop</strong> (<em>bool</em>) – Decide whether the experimental images should be cropped before extracting noise</p></li>
<li><p><strong>cropManual</strong> (<em>bool</em>) – Decide whether all images should be cropped manually with individual limits</p></li>
<li><p><strong>cropX</strong> (<em>int</em>) – crop width used when cropManual is False</p></li>
<li><p><strong>cropY</strong> (<em>int</em>) – crop height used when cropManual is False</p></li>
</ul>
</dd>
</dl>
<dl class="simple">
<dt>Writes:</dt><dd><p>noise*.jpg: Noise image files written to ../sett2/smartNoise/noiseSamples/noiseFiles</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Input .bmp experimental images in the folder ..sett2/smartNoise/noiseSamples and decide
the region being used with cropping parameters. Noise will be extracted and images will be created
at ../sett2/smartNoise/noiseSamples/noiseFiles as .jpg files.</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="defectSimulation.sett2.simulate">
<code class="sig-prename descclassname">defectSimulation.sett2.</code><code class="sig-name descname">simulate</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">runName</span></em>, <em class="sig-param"><span class="n">numImages</span></em>, <em class="sig-param"><span class="n">imageDims</span></em>, <em class="sig-param"><span class="n">maxDefects</span></em>, <em class="sig-param"><span class="n">minDefects</span></em>, <em class="sig-param"><span class="n">decrossMin</span></em>, <em class="sig-param"><span class="n">decrossMax</span></em><span class="sig-paren">)</span><a class="headerlink" href="#defectSimulation.sett2.simulate" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate images and data of simulated smectic films with defects for training</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>runName</strong> (<em>str</em><em>, </em><em>unless told otherwise as 'run DD/MM/YY/hh/mm/ss'</em>) – the name of the directory the output of this function will be stored in. If it already exists, nothing will be overwritten</p></li>
<li><p><strong>numImages</strong> (<em>int</em><em>, </em><em>optional</em>) – number of images the function should create</p></li>
<li><p><strong>imageDims</strong> (<em>list</em><em>, </em><em>optional</em>) – dimensions of the images to be simulated as [x, y] where both are int</p></li>
<li><p><strong>maxDefects</strong> (<em>int</em><em>, </em><em>optional</em>) – maximum number of defects an image can have</p></li>
<li><p><strong>minDefects</strong> (<em>int</em><em>, </em><em>optional</em>) – minimum number of defects an image can have</p></li>
<li><p><strong>decrossMin</strong> (<em>float</em><em>, </em><em>optional</em>) – minimum “Hourglass-ness” of a defect ADAM LOOK HERE</p></li>
<li><p><strong>decrossMax</strong> (<em>float</em><em>, </em><em>optional</em>) – maximum “Hourglass-ness” of a defect ADAM LOOK HERE</p></li>
</ul>
</dd>
</dl>
<dl class="simple">
<dt>Writes:</dt><dd><p><em>_defect</em>.dat: Writes defect location data files to ../sett2/&lt;runName&gt;
<em>_out</em>.dat: Writes spin data files to ../sett2/&lt;runName&gt;
<em>_defect</em>.jpg: Writes images of the schlieren texture to ../sett2/&lt;runName&gt;
<em>_defect</em>.txt: <em>defect</em>.dat converted to txt written to ../sett2/&lt;runName&gt;
<em>_defect*SIMMARKED.jpg: Writes images of schlieren texture with annotated defects to ../sett2/&lt;runName&gt;/SIMMARKED
*_defect</em>.xml: Writes defect bounding boxes in .xml format for YOLO training to ../sett2/&lt;runName&gt;/out</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Creates <em>out</em>.dat files storing spins of individual molecules, <em>defect</em>.dat with defect locations marked.
Also creates .jpg files containing the schlieren texture, the same images with annotated defect locaions and
.xml files with defect locations to be used by YOLO.</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="defectSimulation.sett2.validate">
<code class="sig-prename descclassname">defectSimulation.sett2.</code><code class="sig-name descname">validate</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">saveRun</span></em>, <em class="sig-param"><span class="n">runName</span></em><span class="sig-paren">)</span><a class="headerlink" href="#defectSimulation.sett2.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate model on a dataset through mAP</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>saveRun</strong> (<em>bool</em>) – choose whether or not to save the results to directory of runName</p></li>
<li><p><strong>runName</strong> (<em>str</em>) – directory of run where results of validation will be saved</p></li>
</ul>
</dd>
</dl>
<dl class="simple">
<dt>Writes:</dt><dd><p>validationResults: validation data files written to ../sett2/&lt;runName&gt;/ where base is the directory containing sett2</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>First put .xml files with actual defect locations to ../sett2/mAP/input/ground-truth/ and .json files (results from running model) to ../sett2/mAP/input/detection-results/</p>
</div>
</dd></dl>

</div>
<div class="section" id="module-defectSimulation">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-defectSimulation" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="defectSimulation.simulations.html" class="btn btn-neutral float-right" title="defectSimulation.simulations package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="modules.html" class="btn btn-neutral float-left" title="GIT" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Eric, Ravin

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>